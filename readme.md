# Ansible VMware-Rest Automation Containerize
This repository contains Ansible playbooks and Dockerfile for VMware automation. It includes scripts to create and remove virtual machines on vSphere.

## Files

- **Dockerfile**: Dockerfile for building a container image with the necessary dependencies.
- **create_vm.yml**: Ansible playbook for creating virtual machines on vSphere.
- **env_variables.txt**: Sample environment variable file containing configuration details.
- **remove_vm.yml**: Ansible playbook for removing virtual machines from vSphere.
- **requirements.sh**: Shell script for installing dependencies required by the Docker container.
- **run-container.sh**: Shell script for running the Docker container with the specified environment variables.

## Limitations
- This is a POC - the container will run but not execute it's content.
- Twingate needs to be configured inside the container or as part of a CI tool. for that we will need
  a token generated by the redhat twingate network admins. not sure it is possible. TBD.

## Usage

1. **Build the Docker Image:**
   ```bash
   docker build -t your_image_name .

2. **Run the container:**
   ```bash
   ./run-container.sh

3. **Environment Variables:**
   Modify the env_variables.txt file with your vSphere configuration details.

4. **Create Virtual Machine without the container:**
   ```bash
   ansible-playbook -e @env_variables.txt create_vm.yml

5. **Remove Virtual Machine without the container:**
   ```bash
   ansible-playbook -e @env_variables.txt remove_vm.yml

Make sure to replace placeholders like your_image_name with actual values.

Happy automating!


